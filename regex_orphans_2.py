from parse import get_lines, parse_line, get_data
from rdf import TYPE, LABEL, RELATES, RELATED_BY, NUM_LINES
from utils import get_obj, transpose_dict
from math import log10, floor

edges = get_obj('regex_orphans_edges.pkl')

frequency = transpose_dict(edges)
"""
{0: 967661, 7: 9021, 3: 438610, 4: 89464, 1: 155443, 5: 27736, 8: 22469, 9: 8209, 34: 721, 6: 29238, 2: 1406880, 11: 4864, 10: 12600, 66: 132, 73: 48, 12: 6580, 101: 31, 30: 1087, 20: 2412, 323: 5, 59: 97, 21: 1570, 36: 638, 130: 38, 14: 4720, 62: 154, 18: 2794, 28: 1275, 33: 552, 15: 2369, 23: 1298, 13: 3236, 17: 2010, 26: 1525, 16: 3689, 22: 2042, 29: 791, 44: 335, 46: 311, 138: 31, 56: 186, 42: 443, 24: 1779, 51: 177, 68: 120, 86: 80, 38: 539, 50: 250, 41: 281, 84: 76, 40: 444, 124: 39, 43: 231, 106: 60, 37: 370, 49: 153, 19: 1727, 76: 122, 47: 150, 96: 74, 58: 163, 60: 159, 135: 17, 54: 223, 72: 131, 25: 1142, 70: 110, 31: 665, 48: 282, 258: 14, 71: 50, 87: 40, 530: 1, 116: 35, 390: 1, 32: 875, 53: 221, 90: 70, 152: 33, 27: 1000, 188: 14, 103: 56, 39: 318, 154: 36, 146: 33, 254: 6, 64: 160, 45: 212, 52: 580, 111: 34, 78: 112, 65: 75, 174: 23, 121: 26, 284: 3, 240: 10, 136: 37, 55: 111, 109: 28, 91: 48, 123: 32, 118: 59, 400: 3, 63: 63, 94: 84, 67: 75, 82: 98, 98: 64, 35: 431, 144: 30, 280: 5, 316: 5, 142: 45, 61: 81, 3387: 1, 220: 9, 260: 6, 85: 58, 69: 65, 81: 43, 336: 7, 161: 14, 113: 29, 92: 56, 407: 5, 217: 7, 83: 45, 79: 53, 131: 30, 114: 50, 74: 120, 108: 60, 602: 1, 143: 19, 253: 4, 262: 5, 122: 34, 160: 21, 120: 46, 88: 75, 309: 3, 274: 7, 102: 83, 497: 1, 104: 102, 2169: 1, 175: 6, 179: 15, 150: 25, 80: 72, 93: 44, 848: 1, 139: 20, 117: 23, 566: 2, 89: 46, 676: 1, 270: 4, 168: 24, 420: 2, 95: 42, 110: 60, 157: 19, 843: 1, 344: 4, 379: 2, 119: 29, 219: 8, 75: 56, 151: 15, 229: 8, 165: 9, 148: 29, 330: 2, 604: 1, 149: 21, 163: 10, 137: 19, 711: 1, 184: 24, 100: 74, 228: 11, 1242: 1, 1404: 1, 105: 49, 238: 4, 170: 22, 672: 1, 385: 1, 241: 2, 1505: 1, 547: 1, 147: 10, 132: 33, 216: 14, 428: 2, 301: 5, 416: 6, 166: 24, 514: 1, 287: 4, 371: 2, 126: 32, 97: 33, 222: 5, 181: 9, 194: 10, 183: 15, 326: 3, 134: 34, 452: 1, 164: 21, 189: 14, 191: 13, 185: 11, 218: 11, 302: 6, 112: 51, 153: 23, 162: 16, 127: 30, 156: 23, 99: 50, 311: 3, 290: 6, 264: 9, 214: 14, 178: 29, 129: 26, 169: 8, 197: 10, 115: 35, 195: 7, 192: 11, 266: 7, 107: 27, 196: 14, 422: 2, 318: 5, 1130: 1, 200: 22, 190: 14, 167: 9, 224: 7, 358: 5, 252: 9, 236: 7, 5906: 1, 57: 76, 597: 1, 158: 25, 605: 2, 77: 57, 268: 10, 370: 1, 341: 2, 493: 1, 942: 1, 419: 2, 332: 3, 210: 10, 315: 5, 269: 4, 832: 1, 384: 1, 226: 10, 125: 21, 426: 2, 206: 9, 328: 6, 862: 1, 325: 4, 213: 8, 128: 33, 141: 11, 430: 3, 2173: 1, 504: 4, 3617: 1, 204: 20, 568: 2, 208: 9, 140: 35, 338: 4, 586: 1, 434: 2, 180: 14, 478: 1, 145: 15, 275: 6, 575: 1, 414: 1, 221: 9, 1121: 1, 366: 6, 785: 2, 292: 3, 449: 2, 466: 2, 211: 8, 288: 4, 243: 5, 286: 5, 679: 1, 383: 1, 800: 1, 339: 4, 308: 4, 230: 8, 949: 1, 296: 7, 202: 20, 2237: 1, 201: 9, 235: 2, 278: 5, 282: 4, 403: 3, 319: 4, 177: 8, 812: 1, 193: 7, 4298: 1, 227: 7, 534: 1, 155: 14, 659: 1, 198: 6, 480: 1, 1016: 1, 171: 17, 3508: 1, 381: 3, 209: 7, 265: 3, 3704: 1, 553: 1, 878: 2, 354: 5, 172: 23, 199: 10, 256: 7, 546: 2, 710: 1, 499: 2, 1056: 1, 267: 2, 1116: 1, 916: 1, 314: 5, 462: 4, 250: 7, 263: 1, 574: 1, 176: 11, 261: 2, 244: 11, 723: 1, 395: 3, 259: 5, 133: 24, 320: 2, 317: 1, 7982: 1, 1171: 1, 348: 5, 391: 1, 404: 3, 363: 5, 1702: 1, 3176: 1, 976: 1, 367: 2, 7870: 1, 3706: 1, 173: 14, 239: 2, 469: 1, 774: 1, 375: 2, 360: 2, 7835: 1, 2208: 1, 8216: 1, 423: 2, 368: 2, 182: 15, 304: 2, 603: 1, 898: 1, 494: 4, 628: 1, 698: 2, 775: 1, 356: 3, 455: 1, 778: 1, 234: 10, 961: 1, 518: 2, 2206: 1, 974: 1, 424: 2, 312: 3, 331: 1, 255: 3, 396: 1, 425: 2, 5496: 1, 225: 13, 1013: 1, 294: 3, 1089: 1, 607: 1, 322: 5, 1184: 1, 1295: 1, 242: 6, 496: 1, 1140: 1, 822: 1, 223: 3, 378: 1, 915: 1, 612: 1, 561: 2, 4119: 1, 247: 6, 840: 1, 215: 7, 1199: 1, 440: 2, 712: 1, 501: 1, 681: 1, 305: 7, 2234: 1, 276: 8, 491: 1, 570: 1, 346: 3, 392: 4, 521: 3, 212: 11, 186: 21, 159: 9, 248: 3, 1818: 1, 595: 1, 1310: 1, 350: 2, 187: 7, 444: 3, 307: 4, 337: 1, 2078: 1, 283: 4, 725: 2, 271: 2, 683: 1, 300: 3, 273: 4, 205: 7, 1004: 1, 1717: 1, 474: 1, 470: 1, 1011: 2, 1093: 1, 8139: 1, 661: 1, 399: 2, 955: 1, 365: 2, 335: 1, 285: 5, 580: 3, 2011: 1, 297: 1, 511: 1, 671: 1, 1875: 1, 548: 2, 674: 1, 324: 3, 8523: 1, 1636: 1, 766: 1, 203: 4, 588: 2, 714: 1, 313: 1, 694: 1, 700: 1, 549: 1, 776: 1, 2270: 1, 538: 1, 277: 1, 520: 3, 361: 2, 333: 1, 7867: 1, 411: 1, 1054: 1, 512: 2, 432: 3, 519: 1, 372: 2, 2123: 1, 237: 2, 662: 2, 525: 1, 298: 3, 232: 5, 272: 4, 559: 1, 592: 1, 233: 5, 231: 7, 442: 2, 2231: 1, 744: 1, 310: 1, 457: 1, 608: 1, 762: 1, 437: 1, 722: 2, 289: 6, 531: 1, 2274: 1, 1668: 1, 594: 1, 484: 1, 532: 1, 816: 2, 246: 5, 773: 1, 299: 1, 8206: 1, 412: 1, 734: 1, 524: 1, 986: 1, 245: 1, 473: 1, 468: 1, 1055: 1, 884: 2, 718: 1, 475: 2, 523: 1, 377: 1, 13036: 1, 445: 1, 685: 1, 306: 3, 754: 1, 1041: 1, 924: 1, 874: 1, 343: 1, 303: 1, 351: 1, 1132: 2, 810: 1, 405: 1, 1240: 1, 1200: 1, 3030: 1, 433: 1, 583: 1, 584: 1, 461: 1, 13336: 1, 1452: 1, 713: 1, 515: 1, 598: 1, 487: 1, 429: 1, 349: 1, 563: 1, 2354: 1, 2196: 1, 933: 1, 393: 2, 291: 2, 402: 2, 609: 2, 279: 1, 5868: 1, 560: 1, 558: 1, 1028: 1, 788: 1, 362: 1, 489: 1, 415: 1, 859: 1, 464: 1, 632: 1, 573: 1, 637: 1, 540: 2, 500: 3, 1560: 1, 456: 1, 634: 1, 908: 1, 690: 1, 394: 2, 364: 1, 650: 1, 421: 1, 742: 1, 409: 1, 716: 1, 943: 1, 905: 1, 1090: 1, 736: 1, 352: 1, 2235: 1, 1888: 1, 556: 1, 251: 1, 467: 1, 373: 1, 386: 1, 1076: 1, 1934: 1, 654: 1, 903: 1, 2114: 1, 476: 1, 793: 1, 918: 1, 295: 1, 376: 1, 17650: 1, 510: 1, 481: 1, 695: 1, 458: 1, 8116: 1, 1596: 1, 896: 1, 750: 1, 2324: 1, 397: 1, 596: 1, 1692: 1, 207: 1, 668: 1, 482: 1, 5889: 1, 2222: 1, 1042: 1, 357: 1, 483: 1, 1344: 1, 340: 2, 1564: 1, 21900: 1, 408: 1, 2368: 1, 5884: 1, 814: 1, 669: 1, 545: 1, 1775: 1, 1515: 1, 1097: 1, 1381: 1, 417: 1, 929: 1, 752: 2, 1534: 1, 1333: 1, 1567: 1, 347: 1, 2221: 1, 369: 1, 657: 1, 2573: 1, 1411: 1}
"""

keys = sorted([k for k in frequency])
vals = [frequency[k] for k in keys]

bands = [[0, 0], [1, 9], [10, 99], [100, 999], [1000, 9999], [10000, 999999]]
vals2 = [sum(frequency[k] for k in keys if band[0] <= k <= band[1]) for band in bands]

print(list(zip(bands, vals2)))
# [([0, 0], 967661), ([1, 9], 2187070), ([10, 99], 73686), ([100, 999], 3724), ([1000, 9999], 97), ([10000, 999999], 4)]